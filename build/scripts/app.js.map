{"version":3,"sources":["app.js"],"names":["app","init","webshim","setOptions","lazyCustomMessages","replaceValidationUI","polyfill","document","addEventListener","bindActions","content","querySelector","$","inputmask","clearIncomplete","video","play","links","querySelectorAll","i","length","link","e","preventDefault","el","getAttribute","animate","scrollTop","offset","top","forms","form","self","formData","serialize","ajax","type","url","data","success","alert","clearForm","error","inputsArr","input","value","ageConfirmBtn","classList","contains","localStorage","getItem","remove","createGallery","style","display","setItem","fade","contentCheckAge","add","setTimeout","createNewsPage","createNews","gallery","galleryLeft","galleryRight","galleryCenter","gallerySlider","not","on","event","slick","infinite","adaptiveHeight","arrows","initialSlide","draggable","swipe","window","matchMedia","matches","currentSlide","index","createPosts","console","log","dataResponse","items","DOMEl","JSON","parse","key","posts","j","item","post","postImg","img","postInfo","postTitle","title","postText","text","innerHTML"],"mappings":"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","file":"app.js","sourcesContent":["/*global $ webshim*/\r\n\r\nvar app = {\r\n\r\n\tinit: function() {\r\n\r\n\t\t(function() {\r\n            webshim.setOptions('forms', {\r\n                lazyCustomMessages: true,\r\n                replaceValidationUI: true\r\n            });\r\n            webshim.polyfill('forms');\r\n        }());\r\n\r\n\t\tdocument.addEventListener(\"DOMContentLoaded\", function() {\r\n\t\t\tapp.bindActions();\r\n\t\t});\r\n\t},\r\n\r\n\tbindActions: function() {\r\n\t\tvar content = document.querySelector(\".content\");\r\n\r\n\t\t// form phone input handler\r\n        $(\"input[name=phone]\").inputmask({\r\n            \"mask\": \"+9(999)999-9999\",\r\n            clearIncomplete: true\r\n        });\r\n\r\n\t\t// autoplay video\r\n\t\t(function() {\r\n\t\t\tvar video = document.querySelector(\"#video\");\r\n\r\n\t\t\tif (video) {\r\n\t\t\t\tvideo.play();\r\n\t\t\t}\r\n\t\t})();\r\n\r\n\t\t(function() {\r\n\t\t\tvar links = document.querySelectorAll(\".js-scroll-link\");\r\n\r\n\t\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\t\tvar link = links[i];\r\n\r\n\t\t\t\tlink.addEventListener(\"click\", function(e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tvar el = this.getAttribute(\"href\");\r\n\r\n\t\t\t\t\t$(\"html, body\").animate({\r\n\t\t\t\t\t\tscrollTop: $(el).offset().top\r\n\t\t\t\t\t}, 400);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})();\r\n\r\n\t\t// form handler\r\n\t\t(function() {\r\n\t\t\tvar forms = document.querySelectorAll(\".gallery__form\");\r\n\r\n\t\t\tfor (var i = 0; i < forms.length; i++) {\r\n\t\t\t\tvar form = forms[i];\r\n\r\n\t\t\t\tform.addEventListener(\"submit\", function(e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar self = this;\r\n\t\t\t\t\tvar formData = $(self).serialize();\r\n\r\n\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\ttype: \"POST\",\r\n\t\t\t\t\t\turl: \"mail/send.php\",\r\n\t\t\t\t\t\tdata: formData,\r\n\t\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t\talert(\"Заявка отправлена\");\r\n\t\t\t\t\t\t\tclearForm(self);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terror: function() {\r\n\t\t\t\t\t\t\talert(\"Ошибка\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction clearForm(form) {\r\n\t\t\t\tvar inputsArr = form.querySelectorAll(\"input\");\r\n\r\n\t\t\t\tfor (var i = 0; i < inputsArr.length; i++) {\r\n\t\t\t\t\tvar input = inputsArr[i];\r\n\t\t\t\t\tinput.value = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})();\r\n\t\t\r\n\t\t// confirm age\r\n\t\t(function() {\r\n\t\t\tvar ageConfirmBtn = document.querySelector(\".js-check-age-confirm\");\r\n\t\t\t//localStorage.removeItem(\"checkAge\")\r\n\r\n\t\t\tif (content.classList.contains(\"content_index\")) {\r\n\t\t\t\r\n\t\t\t\tif (localStorage.getItem(\"checkAge\") !== null) {\r\n\t\t\t\t\tcontent.classList.remove(\"content_hide\");\r\n\t\t\t\t\tapp.createGallery();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontent.querySelector(\".content__check-age\").style.display = \"block\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tageConfirmBtn.addEventListener(\"click\", function(e) {\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tlocalStorage.setItem(\"checkAge\", true);\r\n\t\t\t\t\tfade();\r\n\r\n\t\t\t\t\tfunction fade() {\r\n\t\t\t\t\t\tvar contentCheckAge = content.querySelector(\".content__check-age\");\r\n\t\t\t\t\t\tcontentCheckAge.classList.add(\"content__check-age_fade\");\r\n\r\n\t\t\t\t\t\tcontentCheckAge.addEventListener(\"transitionend\", function() {\r\n\t\t\t\t\t\t\tvar self = this;\r\n\r\n\t\t\t\t\t\t\tself.style.display = \"none\";\r\n\t\t\t\t\t\t\tcontent.classList.remove(\"content_hide\");\r\n\r\n\t\t\t\t\t\t\tsetTimeout(app.createGallery, 300)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})();\r\n\r\n\t\t(function createNewsPage() {\r\n\r\n\t\t\tif(document.querySelector(\".content__news\")) {\r\n\t\t\t\tapp.createNews(2);\r\n\t\t\t} else {\r\n\t\t\t\tapp.createNews();\r\n\t\t\t}\r\n\t\t})();\r\n\t},\r\n\r\n\t// switch between forms\r\n\tcreateGallery: function() {\r\n\t\tvar gallery = document.querySelector(\".js-gallery\");\r\n\r\n\t\tif (gallery) {\r\n\t\t\tvar galleryLeft = document.querySelector(\".js-gallery-nav-left\");\r\n\t\t\tvar galleryRight = document.querySelector(\".js-gallery-nav-right\");\r\n\t\t\tvar galleryCenter = document.querySelectorAll(\".js-arrow-goto-center\");\r\n\t\t\tvar gallerySlider;\r\n\r\n\t\t\t$(gallery).not('.slick-initialized').on('init', function(event, slick){\r\n\t\t\t\tgallery.classList.add(\"gallery__container_init\");\r\n\t\t\t});\r\n\r\n\t\t\tgallerySlider = $(gallery).not('.slick-initialized').slick({\r\n\t\t\t\tinfinite: false,\r\n\t\t\t\tadaptiveHeight: true,\r\n\t\t\t\tarrows: false,\r\n\t\t\t\tinitialSlide: 1,\r\n\t\t\t\tdraggable: false,\r\n\t\t\t\tswipe: false,\r\n\t\t\t});\r\n\r\n\t\t\tif (window.matchMedia(\"(max-width:768px)\").matches) {\r\n\t\t\t\tgallerySlider.on('afterChange', function(event, slick, currentSlide){\r\n\t\t\t\t\t\r\n\t\t\t\t\t$(\"html, body\").animate({\r\n\t\t\t\t\t\tscrollTop: $(\"#gallery\").offset().top\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tgalleryLeft.addEventListener(\"click\", function() {\r\n\t\t\t\tgallerySlider.slick(\"slickGoTo\", 0);\r\n\t\t\t});\r\n\r\n\t\t\tgalleryRight.addEventListener(\"click\", function() {\r\n\t\t\t\tgallerySlider.slick(\"slickGoTo\", 2);\r\n\t\t\t});\r\n\r\n\t\t\tfor (var i = 0; i < galleryCenter.length; i++) {\r\n\t\t\t\tgalleryCenter[i].addEventListener(\"click\", function() {\r\n\t\t\t\t\tgallerySlider.slick(\"slickGoTo\", 1);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tcreateNews: function(index) {\r\n\r\n\t\t$.ajax({\r\n\t\t\ttype: \"GET\",\r\n\t\t\turl: \"json/news.json\",\r\n\t\t\tsuccess: function(data) {\r\n\t\t\t\tcreatePosts(data, index);\r\n\t\t\t},\r\n\t\t\terror: function() {\r\n\t\t\t\tconsole.log(\"error\");\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfunction createPosts(dataResponse, items) {\r\n\t\t\tvar DOMEl;\r\n\t\t\tvar data = JSON.parse(dataResponse);\r\n\r\n\t\t\tfor (var key in data) {\r\n\t\t\t\tvar posts = \"\";\r\n\t\t\t\tDOMEl = document.querySelector(\".js-\" + key);\r\n\t\t\t\t\r\n\t\t\t\tif (DOMEl) {\r\n\r\n\t\t\t\t\tfor (var j = 0; j < (items || data[key].length); j++) {\r\n\r\n\t\t\t\t\t\tif (data[key][j]) {\r\n\t\t\t\t\t\t\tvar item = data[key][j];\r\n\t\t\t\t\t\t\tvar post = \"<div class='post'>\";\r\n\t\t\t\t\t\t\tvar postImg = \"<div class='post__img' style='background-image:url(\" + item.img + \")'></div>\";\r\n\t\t\t\t\t\t\tvar postInfo = \"<div class='post__info'>\";\r\n\t\t\t\t\t\t\tvar postTitle = \"<div class='post__title'><p>\" + item.title + \"</p></div>\";\r\n\t\t\t\t\t\t\tvar postText = \"<div class='post__text'>\" + item.text + \"</div>\";\r\n\t\t\t\t\t\t\tpostInfo += postTitle + postText + \"</div>\";\r\n\r\n\t\t\t\t\t\t\tpost += postImg  + postInfo + \"</div>\";\r\n\t\t\t\t\t\t\tposts += post;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tDOMEl.innerHTML = posts;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\napp.init();"]}